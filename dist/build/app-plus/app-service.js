if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";function n(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}function r(e,n){return t.isString(e)?n:e}const l=t=>(n,r=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,r)},o=l("onShow"),a=l("onHide"),i=l("onLaunch"),s=l("onLoad"),c=l("onReachBottom"),p=(e,t)=>{const n=e.__vccOpts||e;for(const[r,l]of t)n[r]=l;return n},u=p(e.defineComponent({__name:"NewsBox",props:{prop:{default:()=>({title:"默认标题",author:"默认作者",hits:648,picurl:"/static/images/nopic.jpg",posttime:"2022-12-13 05:13:20",classid:"50",id:"1"})}},setup(t){const n=t,r=e.computed((()=>{var e;return(null==(e=new Date(1e3*+n.prop.posttime+288e5).toJSON())?void 0:e.substring(0,19).replace("T"," "))||n.prop.posttime}));return(t,l)=>{var o,a,i;return e.openBlock(),e.createElementBlock("view",{flex:"",onClick:l[0]||(l[0]=e=>{return t=n.prop.classid,r=n.prop.id,void uni.navigateTo({url:`/pages/detail/detail?cid=${t}&id=${r}`});var t,r}),class:"flex"},[e.createElementVNode("view",{"w-230rpx":"","h-160rpx":"",class:"w-230rpx h-160rpx"},[e.createElementVNode("image",{src:n.prop.picurl,"w-full":"","h-full":"",mode:"aspectFill",class:"w-full h-full"},null,8,["src"])]),e.createElementVNode("view",{"flex-1":"","pl-20rpx":"",flex:"~ col","justify-between":"",class:"flex-1 pl-20rpx flex flex-col justify-between"},[e.createElementVNode("view",{"text-38rpx":"",class:"uno-shhdux","cut-text-2":""},e.toDisplayString(null==(o=null==n?void 0:n.prop)?void 0:o.title),1),e.createElementVNode("view",{"text-26rpx":"",class:"uno-jlrv0y"},[e.createElementVNode("text",null,e.toDisplayString(null==(a=null==n?void 0:n.prop)?void 0:a.author),1),e.createElementVNode("text",null,e.toDisplayString(null==(i=null==n?void 0:n.prop)?void 0:i.hits)+"浏览",1)]),e.createElementVNode("view",{"text-26rpx":"",class:"uno-jlrv0y"},[e.createElementVNode("text",null,"发布时间: "+e.toDisplayString(e.unref(r)),1)])])])}}}),[["__scopeId","data-v-61f203d8"]]),d=p(e.defineComponent({__name:"index",setup(t){const n=e.ref("50"),l=e.ref(1),o=e.ref(0),a=e.ref([]),i=e.ref([]),p=(e="50")=>{uni.request({url:"https://ku.qingnian8.com/dataApi/news/newslist.php",data:{cid:+e,page:l.value},success:e=>{e.data.length<8&&(o.value=2),i.value=[...i.value,...e.data]}})};return s((()=>{uni.request({url:"https://ku.qingnian8.com/dataApi/news/navlist.php",success:e=>{a.value=e.data}}),p()})),c((()=>{2!==o.value&&(o.value=1,l.value+=1,p())})),(t,s)=>{const c=r(e.resolveDynamicComponent("NewsBox"),u);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("scroll-view",{"scroll-x":"","box-border":"","h-100rpx":"",class:"uno-yzon2s",flex:"","flex-col":"","hide-scroll":"",fixed:"","left-0":"","wtop-0":"","z-10":""},[e.createElementVNode("view",{class:"uno-vudgs5","whitespace-nowrap":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(t.id===e.unref(n)?"uno-b5n0qf":""),onClick:e=>{return r=t.id,a=t.id,n.value=r,l.value=1,o.value=1,i.value=[],void p(a);var r,a}},e.toDisplayString(t.classname),11,["onClick"])))),128))])]),e.unref(i).length?(e.openBlock(),e.createElementBlock("view",{key:0,"p-30rpx":"","pt-130rpx":"","pb-48px":"",class:"p-30rpx pt-130rpx pb-48px"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,"b-b-1px":"","b-b-dotted":"",class:"uno-z9h2wu","py-20rpx":""},[e.createVNode(c,{prop:t},null,8,["prop"])])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"mt-300rpx h-full flex justify-center items-center","h-full":"",flex:"","justify-center":"","items-center":""},[e.createElementVNode("image",{src:"/static/images/nodata.png",mode:"widthFix","w-360rpx":"",class:"w-360rpx"})])),e.createElementVNode("view",{"text-center":"","text-26rpx":"",class:"uno-2ds6zu","leading-2em":""},[1===e.unref(o)?(e.openBlock(),e.createElementBlock("view",{key:0}," 数据加载中... ")):e.createCommentVNode("",!0),2===e.unref(o)?(e.openBlock(),e.createElementBlock("view",{key:1}," 没有更多~ ")):e.createCommentVNode("",!0)])],64)}}}),[["__scopeId","data-v-ac29fea7"]]),m=p(e.defineComponent({__name:"user",setup(t){const n=e.ref([]);return o((()=>{(()=>{const e=uni.getStorageSync("historyArr")||[];n.value=e})()})),(t,l)=>{const o=r(e.resolveDynamicComponent("NewsBox"),u);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",null,[e.createElementVNode("view",{"py-50rpx":"",class:"uno-t68owj",flex:"~ col","justify-center":"","items-center":""},[e.createElementVNode("image",{src:"/static/images/history.png","w-150rpx":"","h-150rpx":"","mb-20rpx":"",class:"w-150rpx h-150rpx mb-20rpx"}),e.createElementVNode("text",{"text-38rpx":"",class:"text-38rpx"}," 浏览历史 ")])]),e.createElementVNode("view",{"p-30rpx":"",class:"p-30rpx"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,"b-b-1px":"","b-b-dotted":"",class:"uno-z9h2wu","py-20rpx":""},[e.createVNode(o,{prop:t},null,8,["prop"])])))),128)),e.withDirectives(e.createElementVNode("view",null,[e.createElementVNode("view",{flex:"~ col","justify-center":"","items-center":"",class:"flex flex-col justify-center items-center"},[e.createElementVNode("image",{src:"/static/images/nohis.png",mode:"widthFix","w-450rpx":"",class:"w-450rpx"}),e.createElementVNode("view",{"text-26rpx":"",class:"uno-cxsvj4"}," 暂无浏览记录 ")])],512),[[e.vShow,0===e.unref(n).length]])])],64)}}}),[["__scopeId","data-v-288c3ed4"]]),x=p(e.defineComponent({__name:"detail",props:{cid:null,id:null},setup(t){const n=t,r=e.ref({title:"",author:"",content:"",posttime:""});uni.request({url:"https://ku.qingnian8.com/dataApi/news/detail.php",data:n,success:e=>{const t=e.data;r.value=JSON.parse(JSON.stringify(t)),r.value.content=r.value.content.replace("<img",'<img style="max-width: 100%"'),uni.setNavigationBarTitle({title:r.value.title}),(e=>{const t=uni.getStorageSync("historyArr")||[],{id:n,classid:r,title:l,author:o,picurl:a,hits:i,posttime:s}=e,c={id:n,classid:r,title:l,author:o,picurl:a,hits:i,posttime:s},p=(d=c,(u=t).length?u.findLastIndex((e=>e.id===d.id&&e.classid===d.classid)):-1);var u,d;p>-1&&t.splice(p,1),t.unshift(c),uni.setStorageSync("historyArr",t)})(t)}});const l=e.computed((()=>{var e;return new Date(1e3*+(null==(e=r.value)?void 0:e.posttime)+288e5).toJSON().substring(0,19).replace("T"," ")}));return(t,n)=>{var o,a,i;return e.openBlock(),e.createElementBlock("view",{"p-30rpx":"",class:"p-30rpx"},[e.createElementVNode("view",{"text-46rpx":"",class:"uno-wi4f81"},e.toDisplayString(null==(o=e.unref(r))?void 0:o.title),1),e.createElementVNode("view",{class:"uno-ti8yqq","p-20rpx":"","my-40rpx":"","text-25rpx":"",flex:"","justify-between":""},[e.createElementVNode("view",null,"编辑: "+e.toDisplayString(null==(a=e.unref(r))?void 0:a.author),1),e.createElementVNode("view",null,e.toDisplayString(e.unref(l)),1)]),e.createElementVNode("view",{"pb-50rpx":"","rich-text-fit-img":"",class:"pb-50rpx rich-text-fit-img"},[e.createElementVNode("rich-text",{nodes:null==(i=e.unref(r))?void 0:i.content},null,8,["nodes"])]),e.createElementVNode("view",{class:"uno-hfm9vf","text-26rpx":"","p-20rpx":""}," 声明: 本站的内容均采集于腾讯新闻, 如果侵权请联系管理(423478357@qq.com)进行整改删除, 本站进行了内容采集不代表本站的及作者观点, 若有侵犯请及时联系管理员, 谢谢您的支持. ")])}}}),[["__scopeId","data-v-14f3f7cf"]]);__definePage("pages/index/index",d),__definePage("pages/user/user",m),__definePage("pages/detail/detail",x);const f=p(e.defineComponent({__name:"App",setup:e=>(i((()=>{n("log","at App.vue:4","App Launch")})),o((()=>{n("log","at App.vue:7","App Show")})),a((()=>{n("log","at App.vue:10","App Hide")})),()=>{})}),[["__scopeId","data-v-6e6044ab"]]);const{app:v,Vuex:y,Pinia:g}={app:e.createVueApp(f)};uni.Vuex=y,uni.Pinia=g,v.provide("__globalStyles",__uniConfig.styles),v._component.mpType="app",v._component.render=()=>{},v.mount("#app")}(Vue,uni.VueShared);
